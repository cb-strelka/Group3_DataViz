
<html>

	<head>


	<script
  src="https://code.jquery.com/jquery-1.9.1.min.js"
  integrity="sha256-wS9gmOZBqsqWxgIVgA8Y9WcQOa7PgSIX+rPA0VL2rbQ="
  crossorigin="anonymous"></script>


  <script src=" https://d3js.org/d3.v3.min.js"></script>


	<style>


	/*

	Chagall
	Kandisky
	Konchalovsky
	Lentulov
	Lissitky
	Malevich
	Petrov Vodkin
	Popova
	Philimonov
	Rodchenko



	chagall
	kandisky
	konchalovsky
	lentulov
	lissitky
	malevich
	petrovvodkin
	popova
	philimonov
	rodchenko

	*/


	body {
		background: white;
		margin:0;
		padding:0;
		background-image: url(data:image/png;base64,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);

		background-color: rgba(218, 218, 167, 0.83);


	}

		.node {
  font: 10px sans-serif;
  line-height: 12px;
  overflow: hidden;
  position: absolute;
  text-indent: 2px;
}

	#treemap {

		border:20px solid rgba(226, 226, 143, 0.8);
		margin-left:40px;
		margin-top:00px;
		width:1200px;
		  transform: perspective( 1800px ) rotateX(10deg) rotateY(10deg) scale(0.8);

	}

	.node {
/* 		background-size:300%; */
		background-size: 2500px;
		background-position:50% 50%;
		border:1px solid rgba(252, 252, 252, 0.74) !important;

	}

	.painting-1 {
		background-image:url("paintings/chagall_01.jpg");

	}

	.painting-2 {
		background-image:url("paintings/chagall_02.jpg");

	}


	.painting-3 {
		background-image:url("paintings/kandinsky_01.jpg");

	}

	.painting-4 {
		background-image:url("paintings/kandinsky_02.jpg");

	}

	.painting-5 {
		background-image:url("paintings/konchalovsky_01.jpg");
	}

	.painting-6 {
		background-image:url("paintings/konchalovsky_02.jpg");
	}


	.painting-7 {
		background-image:url("paintings/lentulov_01.jpg");
	}

	.painting-8 {
		background-image:url("paintings/lentulov_02.jpg");
	}

	.painting-9 {
		background-image:url("paintings/lissitsky_01.jpg");
	}

	.painting-10 {
		background-image:url("paintings/lissitsky_02.jpg");
	}

	.painting-11 {
		background-image:url("paintings/malevich_01.jpg");
	}

	.painting-12 {
		background-image:url("paintings/malevich_02.jpg");
	}

	.painting-13 {
		background-image:url("paintings/petrovvodkin_01.jpg");
	}

	.painting-14 {
		background-image:url("paintings/petrovvodkin_02.jpg");
	}

	.painting-15 {
		background-image:url("paintings/popova_01.jpg");
	}

	.painting-16 {
		background-image:url("paintings/popova_02.jpg");
	}

	.painting-17 {
		background-image:url("paintings/rodchenko_01.jpg");
	}

	.painting-18 {
		background-image:url("paintings/rodchenko_02.jpg");
	}

	.painting-19 {
		background-image:url("paintings/tatlin_01.jpg");
	}

	.painting-20 {
		background-image:url("paintings/tatlin_02.jpg");
	}






	</style>

	<script>

	 	$( document ).ready(function() {
	function buildTreemap(){

			var data1 = {
				"name": "items",
				"children": [

				]
			};

		/*

		{
						"id": "33447",
						"value": "13",
						"color": "#ff8080",
						"keytable": "CCR",
						"class_name":"malevich-01"
					},
					{
						"id": "33455",
						"value": "90",
						"color": "#80ff80",
						"keytable": "COMMODITY",
						"class_name":"kandinsky-01"
					},
					{
						"id": "212",
						"value": "90",
						"color": "#80ff80",
						"keytable": "COMMODITY",
						"class_name":"kandinsky-02"
					}


		*/

		for (i = 0; i < 20; i++) {


			var newObj =
			{
						"id": i*55,
						"value": Math.random()*i*i,
						"color": "#222",
						"keytable": "CCR",
						"class_name":"painting-"+(i+1),
			}

			data1["children"][i] = newObj;

		}

		console.log(data1);

		var margin = {top: 0, right: 0, bottom: 0, left: 0},
			width = 1200 - margin.left - margin.right,
			height = 800 - margin.top - margin.bottom;

		var treemap = d3.layout.treemap()
			.size([width, height])
			//.sticky(false)
			.sort(function(a,b) { return a.value - b.value; })
			.round(true)
			.value(function(d) { return d.value });


		var div = d3.select("#treemap").append("div")
			.style("position", "relative")
			.style("width", (width + margin.left + margin.right) + "px")
			.style("height", (height + margin.top + margin.bottom) + "px")
			.style("left", margin.left + "px")
			.style("top", margin.top + "px")
			.attr("id", "first")
			;



		var node = div.datum(data1).selectAll(".node")
			.data(treemap.nodes)
			.enter().append("div")
			.attr("class", function(d) { return "node " +  d.class_name; })
			.call(position)
			//.style("background", function(d) { return d.color ? d.color : "#ffffff"; })
// 			.text(function(d) { return d.children ? "blue" : d.keytable + "(" + d.value + "-" + Math.max(0, d.dx) + "-" + Math.max(0, d.dy) + ")"; })
			;

		d3.selectAll("#newValue").on("click", function() {
            var node = div.datum(data2).selectAll(".node")
			    .data(treemap.nodes);
            node.enter().append("div")
			.attr("class", "node")
			.style("background-size",Math.random()*2000 + "px");
            node.transition().duration(5000).call(position)
			//.style("background", function(d) { return d.color ? d.color : "#ffffff"; })
// 			.text(function(d) { return d.children ? "blue" : d.keytable + "(" + d.value + "-" + Math.max(0, d.dx) + "-" + Math.max(0, d.dy) + ")"; })
			;
		});

		setInterval( function(){

//			 console.log(data1)

//			 data1["children"][0]["area"] == 30;

			// console.log( data1["children"][0]);


				for (i = 0; i < 20; i++) {


				data1["children"][i].value = Math.random() * i * i;

			}





			  console.log( data1["children"][0].value);


			 var node = div.datum(data1).selectAll(".node")
			    .data(treemap.nodes);

			node.transition().duration(300).call(position)
			//.style("background-size",Math.random()*5000 + "px")
// 			.text(function(d) { return d.children ? "blue" : d.keytable + "(" + d.value + "-" + Math.max(0, d.dx) + "-" + Math.max(0, d.dy) + ")"; })
			;


		}
		,

		2000);

		function UpdateValues() {


		}


		function UpdateTreeMap() {

		}

	};

	buildTreemap();


});



function position() {
    this.style("left", function(d) { return d.x + "px"; })
        .style("top", function(d) { return d.y + "px"; })
        .style("width", function(d) { return Math.max(0, d.dx) + "px"; })
        .style("height", function(d) { return Math.max(0, d.dy) + "px"; });
}
	</script>

	</head>

<body>

<div id="treemap" style=""></div>
<div style="position: relative; top: 100px;">
<input name="" id="newValue" type="button" value="change"></input>
</div>

</body>

</html>
